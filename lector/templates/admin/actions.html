{% load i18n %}

{% block extrastyle %}
<style>
    /* Estilos del select de acciones */
    .actions select {
        color: #111;              
        background-color: #fff;   
        border: 1px solid #ccc;
        border-radius: 6px;
        padding: 0.5rem 0.6rem;
        width: 100%;            /* ocupa todo el ancho en móvil */
        box-sizing: border-box;
        font-size: 0.9rem;
    }

    /* Botón aplicar */
    .actions button {
        width: 100%;            /* ocupa todo el ancho en móvil */
        box-sizing: border-box;
        font-size: 0.9rem;
        padding: 0.5rem 0;
    }

    /* Contenedor flex */
    .actions .group {
        flex-direction: column; /* apilar en móviles */
        gap: 0.5rem;
    }

    .btn-aplicar {
        background-color: #fefefe !important;
        color: #111827 !important;
    }
    
    html.dark .btn-aplicar {
        background-color: #111827 !important;
        color: #fefefe !important;
    }

    @media (min-width: 640px) { /* sm */
        .actions .group {
            flex-direction: row;  /* horizontal en pantallas >= sm */
            gap: 0.5rem;
            align-items: center;
        }

        .actions select, .actions button {
            width: auto;          /* ancho automático en pantallas grandes */
        }

        .btn-aplicar {
            background-color: #fefefe !important;
            color: #111827 !important;
            padding-left: 0.5rem !important;
            padding-right: 0.5rem !important;
        }
        
        html.dark .btn-aplicar {
            background-color: #111827 !important;
            color: #fefefe !important;
            padding-left: 0.5rem !important;
            padding-right: 0.5rem !important;
        }
    }
</style>
{% endblock %}


<div id="changelist-actions" class="actions flex flex-col gap-3 text-white sm:flex-row sm:items-center lg:items-center {% if not cl.model_admin.list_fullwidth %}mx-auto{% endif %}" x-bind:style="'width: ' + changeListWidth + 'px'">
    {% block actions %}
        <div class="group primary flex flex-row gap-2 lg:flex-row">
            {% block actions-form %}
                {% for field in action_form %}
                    {% if field.label %}
                        <label class="mr-2 text-sm font-medium text-white">
                            {{ field.label }}
                        </label>
                    {% endif %}

                    {{ field }}

                    {% if field.label %}
                        </label>
                    {% endif %}
                {% endfor %}
            {% endblock %}

            {% block actions-submit %}
                <button type="submit"
                        class="btn-aplicar bg-primary-600 hover:bg-primary-700 cursor-pointer flex font-medium items-center justify-center px-3 py-2 rounded-default text-sm text-white whitespace-nowrap"
                        title="{% translate "Run the selected action" %}"
                        name="index" value="{{ action_index|default:0 }}">
                    {% trans "Aplicar" %}
                </button>
            {% endblock %}
        </div>

        {% block actions-counter %}
            {% if actions_selection_counter %}
                <div class="flex grow flex-col sm:flex-row sm:items-center">
                    <span class="action-counter" data-actions-icnt="{{ cl.result_list|length }}">
                        {{ selection_note }}
                    </span>
                    {% if cl.result_count != cl.result_list|length %}
                        <span class="all hidden">{{ selection_note_all }}</span>
                        {% if not cl.model_admin.list_disable_select_all %}
                            <div class="mt-3 sm:ml-auto sm:mt-0">
                                <span class="question hidden">
                                    <a href="#" class="bg-white/20 block border font-medium px-3 py-2 rounded-default text-white transition-colors hover:bg-white/30">
                                        {% blocktranslate with cl.result_count as total_count %}Seleccionar todos los {{ total_count }} {{ module_name }}{% endblocktranslate %}
                                    </a>
                                </span>
                                <span class="clear hidden">
                                    <a href="#" class="bg-white/20 block border font-medium px-3 py-2 rounded-default text-white transition-colors hover:bg-white/30">
                                        {% translate "Limpiar selección" %}
                                    </a>
                                </span>
                            </div>
                        {% endif %}
                    {% endif %}
                </div>
            {% endif %}
        {% endblock %}
    {% endblock %}
</div>
